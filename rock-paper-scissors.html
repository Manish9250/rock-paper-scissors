<!DOCTYPE html>
<html>
    <head>
        <title>Rock, Paper & Scissors</title>
        
    </head>
    <body>
        <h1>Rock, Paper & Scissors</h1>
        <button onclick="
            userPick = 'rock';
            check(userPick);
        ">Rock</button>
        <button onclick="
            userPick = 'paper';
            check(userPick);
        ">Paper</button>
        <button onclick="
            userPick = 'scissors';
            check(userPick);
        ">Scissors</button>
        <p onclick="
            alert(` Wins : ${score.Wins} \n Losses : ${score.Losses} \n Ties : ${score.Ties}`)
        
        ">Score: </p>
        <p class="js-wins">Wins: 0</p>
        <p class="js-losses">Losses: 0</p>
        <p class="js-ties">Ties: 0</p>
        <button onclick="
            score = {
                Wins: 0,
                Losses: 0,
                Ties: 0
            }
            displayScores();
            saveData(score);
            

        ">Reset</button>
        

        <script>
            let userPick = NaN;
            
            // Gets saved score data or set default values
            let score = JSON.parse(localStorage.getItem('score')) ||{
                Wins: 0,
                Losses: 0,
                Ties: 0
            };

            console.log(JSON.parse(localStorage.getItem('score')));

            
            // Funtion to pick a random guess
            function computerPick(){
                randomNumber = Math.random(); //Generating:   0 <= random number <1
                let guess = '';
               
                if (randomNumber <= 1/3){ // Rock is randomNumber <= 1/3
                    guess = 'rock';
                } else if (randomNumber <= 2/3){ //Paper is b/w 1/3 randomNumber <= 2/3
                    guess = 'paper'
                } else{
                    guess = 'scissors'
                }

                return guess;
            }

            // Funtion to check result of play
            function check(userPick){
                                
                let result = '';
                const computerGuess = computerPick();

                if (userPick === 'rock'){
                    if (computerGuess === 'rock'){ 
                        result = 'tie';
                    } else if (computerGuess === 'paper'){
                        result = 'loss';
                    } else{
                        result = 'win';
                    }
                } else if ( userPick === 'paper'){
                    if (computerGuess === 'rock'){ 
                        result = 'win';
                    } else if (computerGuess === 'paper'){ 
                        result = 'tie';
                    } else{
                        result = 'loss';
                    }
                } else {
                    if (computerGuess === 'rock'){ 
                        result = 'loss';
                    } else if (computerGuess === 'paper'){ 
                        result = 'win';
                    } else{
                        result = 'tie';
                    }
                }

                // alert(` ${result.toUpperCase()} \n Your Pick: ${userPick} \n Computer Pick: ${computerGuess}`);
                updateScore(result);
                displayScores();
                return result;
            }

            // Saves data
            function saveData(score){    

                const data = JSON.stringify(score);
                console.log(JSON.stringify(score));
                localStorage.setItem('score', data);
            }

            // Updating Scores
            function updateScore(result){

                if (result === 'win'){
                    score.Wins += 1;
                } else if(result === 'loss'){
                    score.Losses += 1;
                } else{
                    score.Ties += 1;
                }

                saveData(score);
            }

            // Display Scores on page
            function displayScores(){
                const winElem =  document.querySelector(".js-wins");
                winElem.innerText = `Wins: ${score.Wins}` 
                
                const lossElem =  document.querySelector(".js-losses");
                lossElem.innerText = `Wins: ${score.Losses}` 
               
                const tieElem =  document.querySelector(".js-ties");
                tieElem.innerText = `Wins: ${score.Ties}` 

            }

            displayScores();


        </script>
    </body>
</html>